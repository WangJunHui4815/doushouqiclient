{"version":3,"sources":["userInfoCtrl.js"],"names":["Tools","require","cc","Class","extends","Component","properties","userName","Label","userCoin","userIcon","Sprite","getReady","offline","banker","chatInfo","emoji","_userId","showUserInfo","data","setUserName","name","setUserCoin","score","isGetReady","ready","isOffline","online","isBanker","userid","string","coin","isReady","node","active","isOnline","userId","vv","userMgr","getBankerId","showChatInfo","str","callback","unschedule","scheduleOnce","onLoad","on","log","bind","spriteFrame","emjioAtlas","getSpriteFrame","createAnimationByName","start"],"mappings":"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","file":"userInfoCtrl.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\sprite\\common","sourcesContent":["const Tools = require(\"Tools\")\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        userName: cc.Label,\r\n        userCoin: cc.Label,\r\n        userIcon: cc.Sprite,\r\n        getReady: cc.Sprite,\r\n        offline: cc.Sprite,\r\n        banker: cc.Sprite,\r\n        chatInfo: cc.Label,\r\n        emoji: cc.Sprite,\r\n\r\n        _userId:0,\r\n    },\r\n    showUserInfo: function (data) {\r\n        this.setUserName(data.name)\r\n        this.setUserCoin(data.score)\r\n        this.isGetReady(data.ready)\r\n        this.isOffline(data.online)\r\n        this.isBanker(data.userid)\r\n    },\r\n    \r\n    setUserName(name) {\r\n        this.userName.string = name\r\n    },\r\n\r\n    setUserCoin(coin) {\r\n        this.userCoin.string = coin\r\n    },\r\n\r\n    isGetReady(isReady) {\r\n        this.getReady.node.active = isReady\r\n    },\r\n\r\n    isOffline(isOnline) {\r\n        this.offline.node.active = !isOnline\r\n    },\r\n\r\n    isBanker(userId) {\r\n        this.banker.node.active = cc.vv.userMgr.getBankerId() == userId\r\n    },\r\n\r\n    showChatInfo (str) {\r\n        let callback = function () {\r\n            this.chatInfo.node.active = false\r\n        }\r\n        this.chatInfo.unschedule(callback)\r\n        this.chatInfo.node.active = true\r\n        this.chatInfo.string = str\r\n        this.chatInfo.scheduleOnce(callback, 2)\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        this.node.on(\"user_state\", function (isReady) {\r\n            cc.log(\"userinfoctrl userready\")\r\n            this.isGetReady(isReady)\r\n        }.bind(this))\r\n\r\n        this.node.on(\"show_chat_info\", function (data) {\r\n            cc.log(\"show_chat_info\")\r\n            cc.log(data)\r\n            this.chatInfo.string = data\r\n            this.chatInfo.node.active = true\r\n        }.bind(this))\r\n\r\n        this.node.on(\"show_emoji_info\", function (data) {\r\n            cc.log(\"show_emoji_info\")\r\n            cc.log(data)\r\n            this.emoji.spriteFrame = cc.vv.emjioAtlas.getSpriteFrame(data + \"0\")\r\n            this.emoji.node.active = true\r\n            Tools.createAnimationByName(this.emoji.node, data, 0.5, 10, () => {\r\n                this.emoji.node.active = false\r\n            })\r\n        }.bind(this))\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}